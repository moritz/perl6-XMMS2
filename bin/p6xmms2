#!/usr/bin/env perl6
use v6;
use XMMS2::Client;

multi sub MAIN('play') {
    client.play;
}

sub client {
    # This is a hack because I don't know how to write "C NULL"
    my $path = (
        %*ENV<XMMS_PATH>,
        "unix:///tmp/xmms-ipc-{qx[whoami].trim}"
    ).first: *.so;

    return XMMS2::Client.new(:client-name<p6xmms2>, :$path);
}
